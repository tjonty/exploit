import React, { useState } from 'react';
import { useSelector, useDispatch } from 'react-redux';
import { addToList, clearState} from '../Product/filteredProductSlice';

export default function Search({isChecked, setIsChecked}) {
    
    const products = useSelector(state => state.products);

    const [term, setTerm] = useState('')
    
    const dispatch = useDispatch();

    function filteredProducts() {
        setIsChecked(!isChecked);
        if(term === '') {
            dispatch(clearState());
        } else {
            dispatch(addToList(products.filter(product => product.title.includes(term))));
        }   
    }
    return (
        <div>
            <input className='search input' type="text" placeholder='search' onChange={(e) => setTerm(e.target.value)}></input>
            <input className='search btn' type='button' onClick={filteredProducts} value='search'/>
        </div>
    )
}
