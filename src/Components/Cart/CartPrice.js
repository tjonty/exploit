import React from 'react';
import { useSelector, useDispatch } from 'react-redux';
import { checkoutProduct } from './CartSlicer';

export default function CartPrice({ setCheckoutStatus, checkoutStatus }) {
    
    const carts = useSelector(state => state.carts);
    let qtn = carts.reduce((tot, cart) => {
        return tot + cart.quantity;
    },0);
    let cost = carts.reduce((tot, cart) => {
        return tot + (cart.price * cart.quantity);
    },0);

    const dispatch = useDispatch();

    function handleCheckout() {
        setCheckoutStatus(true);
        dispatch(checkoutProduct())
    }

    return (
        <>
            <h1>Sub Total</h1>
            <p> {qtn} items </p>
            <p>${cost}</p>
            <button className='product-btn' onClick={handleCheckout}>Checkout</button>
        </>
    )
}
